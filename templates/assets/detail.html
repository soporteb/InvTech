{% extends 'base.html' %}
{% block title %}Asset Detail{% endblock %}
{% block content %}
<div class="card">
  <div class="flex justify-between">
    <h1 class="text-xl font-semibold">Asset #{{ object.id }}</h1>
    <a href="{% url 'asset_edit' object.pk %}" class="btn-primary">Edit</a>
  </div>
  <div class="mt-4 flex gap-3 text-sm">
    <a href="?tab=overview">Overview</a>
    <a href="?tab=assignments">Assignments</a>
    <a href="?tab=history">History</a>
  </div>

  {% if tab == 'overview' %}
  <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
    <p><strong>Category:</strong> {{ object.category.name }}</p>
    <p><strong>Location:</strong> {{ object.location.exact_name }}</p>
    <p><strong>Status:</strong> {{ object.status.name }}</p>
    <p><strong>Padlock:</strong> {{ asset_context.padlock }}</p>
    <p><strong>License:</strong> {{ asset_context.license }}</p>
  </div>
  {% elif tab == 'assignments' %}
    <ul class="mt-4 text-sm">
      {% for assignment in object.assignments.all %}
      <li>{{ assignment.employee.names }} ({{ assignment.start_date }} - {{ assignment.end_date|default:'Current' }})</li>
      {% empty %}<li>No assignments.</li>{% endfor %}
    </ul>
  {% else %}
    <ul class="mt-4 text-sm">
      {% for event in object.events.all %}
      <li>{{ event.timestamp }} Â· {{ event.summary }}</li>
      {% empty %}<li>No history.</li>{% endfor %}
    </ul>
  {% endif %}
</div>
{% endblock %}
